{"features":[
  {"id":"AAG-065","name":"ReplyDetector — sync inboxes and detect new replies","description":"Call crm_brain.py --sync (or replicate its logic inline). After sync, query: SELECT id FROM crm_contacts WHERE pipeline_stage='contacted' AND last_inbound_at > last_outbound_at. These are replies","category":"agent","priority":1,"status":"completed","passes":true,"prd":"PRD-024"},
  {"id":"AAG-066","name":"Reply handler — advance stage + queue human notification","description":"On reply detected: UPDATE pipeline_stage='replied'. INSERT acq_funnel_events. INSERT acq_human_notifications with AI-generated 2-sentence summary of the conversation","category":"agent","priority":1,"status":"completed","passes":true,"prd":"PRD-024"},
  {"id":"AAG-067","name":"Human notification — Apple push on reply","description":"Call mcp0_notifications_send_notification: title='New Reply from {name}', message='{summary} — replied on {platform}'. Include Supabase contact URL in message","category":"integration","priority":1,"status":"completed","passes":true,"prd":"PRD-024"},
  {"id":"AAG-068","name":"Human notification — email on reply","description":"Call mcp0_mail_create_email: subject='[CRM] Reply from {name} on {platform}', body=full conversation summary + contact brief + recommended response angle","category":"integration","priority":2,"status":"completed","passes":true,"prd":"PRD-024"},
  {"id":"AAG-069","name":"Conversation summary generator for human handoff","description":"When reply detected, call Claude with full crm_messages thread for this contact. Generate: 2-sentence summary, sentiment (positive/neutral/objection), recommended_response_angle. Store in acq_human_notifications.summary","category":"agent","priority":2,"status":"completed","passes":true,"prd":"PRD-024"},
  {"id":"AAG-070","name":"Follow-up 1 generator (Day 4)","description":"For contacts: pipeline_stage='contacted', last_outbound_at < NOW()-3days, no inbound. Generate Day 4 follow-up. Different angle (social proof or result-focused). Claude with FollowUp1 prompt template","category":"agent","priority":1,"status":"completed","passes":true,"prd":"PRD-024"},
  {"id":"AAG-071","name":"Follow-up 2 generator (Day 7)","description":"For contacts: pipeline_stage='follow_up_1', last_outbound_at < NOW()-3days, no inbound. Generate Day 7 close-the-loop message. 1-2 sentences, acknowledges last message, leaves door open","category":"agent","priority":1,"status":"completed","passes":true,"prd":"PRD-024"},
  {"id":"AAG-072","name":"Archive handler — move to archived after Day 7 no-reply","description":"For contacts: pipeline_stage='follow_up_2', last_outbound_at < NOW()-3days, no inbound. UPDATE pipeline_stage='archived', SET archived_at=NOW(). INSERT acq_funnel_events","category":"agent","priority":1,"status":"completed","passes":true,"prd":"PRD-024"},
  {"id":"AAG-073","name":"POST /api/acquisition/followup/process endpoint","description":"Run full follow-up cycle: sync inboxes, detect replies, send due follow-ups, archive timed-out. Returns replied[], followup_1_sent[], followup_2_sent[], archived[]","category":"api","priority":2,"status":"completed","passes":true,"prd":"PRD-024"},
  {"id":"AAG-074","name":"Follow-up CLI — python3 acquisition/followup_agent.py","description":"CLI flags: --process, --dry-run, --show-pending. Show table of contacts due for follow-up with days since last touch","category":"setup","priority":2,"status":"completed","passes":true,"prd":"PRD-024"},
  {"id":"AAG-075","name":"Follow-up tests","description":"pytest: test_reply_detector_finds_inbound, test_stage_advance_to_replied, test_followup1_triggers_at_day4, test_followup2_triggers_at_day7, test_archive_after_day7_noreply, test_human_notification_sent","category":"testing","priority":2,"status":"completed","passes":true,"prd":"PRD-024"}
]}
