{"features":[
  {"id":"AAG-005","name":"MarketResearchClient wrapper for discovery","description":"Async Python client calling Market Research API (port 3106). Methods: search_platform(platform, keyword, max_results), get_top_creators(platform, niche, limit). Returns normalized ProspectData objects","category":"integration","priority":1,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-006","name":"DeduplicationEngine","description":"Check crm_contacts for existing handles before inserting. Query: SELECT id FROM crm_contacts WHERE instagram_handle=$1 OR twitter_handle=$1 OR tiktok_handle=$1 OR linkedin_url=$1. Returns existing_id or None","category":"agent","priority":1,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-007","name":"ContactSeeder — upsert discovered prospects to crm_contacts","description":"Upsert new prospects to crm_contacts with pipeline_stage='new'. Map platform handles, follower count, top post data, niche label, source_niche_config_id. Never overwrite existing data if contact already exists","category":"agent","priority":1,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-008","name":"DiscoveryAgent.run() — main discovery loop","description":"For each active niche config: for each platform × keyword combination, call MarketResearchClient, deduplicate, seed contacts. Log results to acq_discovery_runs. Return DiscoveryResult with counts","category":"agent","priority":1,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-009","name":"TikTok creator enrichment in discovery","description":"After seeding TikTok contacts, call enrichment endpoint to pull follower count. Update crm_contacts.follower_count_tiktok. Skip if already enriched in last 7 days","category":"integration","priority":2,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-010","name":"LinkedIn discovery via li_prospect.py integration","description":"Call li_prospect.py --search for LinkedIn-targeted niche configs. Parse stdout output into ProspectData objects. Add to discovery pipeline","category":"integration","priority":2,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-011","name":"Discovery rate limiter — max 3 concurrent platform scans","description":"Use asyncio.Semaphore(3) to limit concurrent Market Research API calls. Add 5s delay between requests to same platform to avoid rate limits","category":"agent","priority":2,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-012","name":"Discovery run logging","description":"INSERT to acq_discovery_runs after each platform×keyword scan: niche_config_id, platform, keyword, discovered, deduplicated, seeded, errors[], duration_ms","category":"agent","priority":2,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-013","name":"POST /api/acquisition/discovery/run endpoint","description":"HTTP endpoint to trigger a discovery run for a specific niche config and platform. Accepts dry_run flag. Returns run stats synchronously for configs that complete in <30s, otherwise returns run_id for polling","category":"api","priority":2,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-014","name":"GET /api/acquisition/discovery/runs endpoint","description":"List recent discovery runs with pagination. Filter by niche_config_id, platform, date range. Returns run stats including error summaries","category":"api","priority":3,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-015","name":"POST/GET /api/acquisition/niches endpoints","description":"CRUD endpoints for niche configs. POST creates, PUT updates, DELETE deactivates. GET lists all with last_run stats joined","category":"api","priority":2,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-016","name":"Discovery CLI — python3 acquisition/discovery_agent.py --run","description":"CLI flags: --niche-id, --platform, --dry-run, --limit. Prints discovered/seeded counts per niche. Matches crm_brain.py CLI pattern","category":"setup","priority":2,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-017","name":"Re-entry logic — allow archived contacts back after 180 days","description":"Before seeding: check if contact exists with pipeline_stage='archived' and archived_at < NOW()-180days. If so, reset to pipeline_stage='new' rather than creating duplicate","category":"agent","priority":2,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-018","name":"Closed-lost re-entry after 90 days","description":"Same re-entry logic for closed_lost contacts. Reset after 90 days. Add re_entry_count field to crm_contacts to track how many times contact has re-entered pipeline","category":"agent","priority":3,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-019","name":"Discovery tests — unit tests for dedup, seeding, run logging","description":"pytest tests: test_dedup_existing_contact, test_seed_new_contact, test_discovery_run_logging, test_rate_limiter, test_reentry_logic. Mock Market Research API responses","category":"testing","priority":2,"status":"completed","passes":true,"prd":"PRD-022"},
  {"id":"AAG-020","name":"Discovery health check endpoint","description":"GET /api/acquisition/discovery/health — returns service status, last successful run timestamp per niche, contacts seeded this week","category":"api","priority":3,"status":"completed","passes":true,"prd":"PRD-022"}
]}
